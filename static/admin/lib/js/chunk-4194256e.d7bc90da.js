(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4194256e"],{"0e44":function(e,t,n){var r=n("88dd"),o=n("a013"),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n("01f5")(Function.call,n("acb9").f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},"21de":function(e,t,n){var r=n("b2f5"),o=n("50e0")(!0);r(r.S,"Object",{entries:function(e){return o(e)}})},2564:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return a});var r=n("b775");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Object(r["a"])({url:"/role?where=".concat(JSON.stringify(e),"&embedded=").concat(JSON.stringify(t),"&sort=").concat(n),method:"get"})}function i(e){return Object(r["a"])({url:"/role",method:"post",data:e})}function l(e,t){return Object(r["a"])({url:"/role/".concat(e),method:"patch",data:t})}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/role?where=".concat(JSON.stringify(e)),method:"delete"})}},"26de":function(e,t,n){},"44de":function(e,t,n){var r=n("88dd"),o=n("0e44").set;e.exports=function(e,t,n){var i,l=t.constructor;return l!==n&&"function"==typeof l&&(i=l.prototype)!==n.prototype&&r(i)&&o&&o(e,i),e}},"50e0":function(e,t,n){var r=n("dad2"),o=n("cfc7"),i=n("3a68"),l=n("d217").f;e.exports=function(e){return function(t){var n,a=i(t),c=o(a),s=c.length,u=0,f=[];while(s>u)n=c[u++],r&&!l.call(a,n)||f.push(e?[n,a[n]]:a[n]);return f}}},"539d":function(e,t,n){var r=n("b2f5"),o=n("f01a"),i=n("b6f1"),l=n("c9ea"),a="["+l+"]",c="​",s=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),f=function(e,t,n){var o={},a=i(function(){return!!l[e]()||c[e]()!=c}),s=o[e]=a?t(d):l[e];n&&(o[n]=s),r(r.P+r.F*a,"String",o)},d=f.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(s,"")),2&t&&(e=e.replace(u,"")),e};e.exports=f},6724:function(e,t,n){"use strict";n("8d41");var r={bind:function(e,t){e.addEventListener("click",function(n){var r=Object.assign({},t.value),o=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),i=o.ele;if(i){i.style.position="relative",i.style.overflow="hidden";var l=i.getBoundingClientRect(),a=i.querySelector(".waves-ripple");switch(a?a.className="waves-ripple":(a=document.createElement("span"),a.className="waves-ripple",a.style.height=a.style.width=Math.max(l.width,l.height)+"px",i.appendChild(a)),o.type){case"center":a.style.top=l.height/2-a.offsetHeight/2+"px",a.style.left=l.width/2-a.offsetWidth/2+"px";break;default:a.style.top=(n.pageY-l.top-a.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",a.style.left=(n.pageX-l.left-a.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return a.style.backgroundColor=o.color,a.className="waves-ripple z-active",!1}},!1)}},o=function(e){e.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(o)),r.install=o;t["a"]=r},"7c56":function(e,t,n){var r=n("3754"),o=n("44de"),i=n("ddf7").f,l=n("a891").f,a=n("22e9"),c=n("f425"),s=r.RegExp,u=s,f=s.prototype,d=/a/g,h=/a/g,p=new s(d)!==d;if(n("dad2")&&(!p||n("b6f1")(function(){return h[n("8b37")("match")]=!1,s(d)!=d||s(h)==h||"/a/i"!=s(d,"i")}))){s=function(e,t){var n=this instanceof s,r=a(e),i=void 0===t;return!n&&r&&e.constructor===s&&i?e:o(p?new u(r&&!i?e.source:e,t):u((r=e instanceof s)?e.source:e,r&&i?c.call(e):t),n?this:f,s)};for(var g=function(e){e in s||i(s,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},v=l(u),m=0;v.length>m;)g(v[m++]);f.constructor=s,s.prototype=f,n("e5ef")(r,"RegExp",s)}n("c650")("RegExp")},"8d41":function(e,t,n){},a87e:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("panel-title",{attrs:{title:"角色管理","is-line":""}}),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.createRoleInfo}},[e._v("创 建")])],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"table",attrs:{data:e.roleList,border:"",fit:""},on:{"selection-change":e.selectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",fixed:"",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"key",label:"key",sortable:"",fixed:"",width:"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称",sortable:"",fixed:"",width:"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"desc",label:"描述"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right",align:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.editRole(t.row)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.deleteRole(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("table-foot",{ref:"tableFoot",attrs:{"data-length":e.roleList.length},on:{setSelection:e.setSelection,clearSelection:function(t){return e.$refs.table.clearSelection()},toggleAllSelection:function(t){return e.$refs.table.toggleAllSelection()}}},[n("template",{slot:"foot"},[n("span",[n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:!e.selectedRoles.length},on:{click:function(t){return e.deleteRole(e.selectedRoles)}}},[e._v("删 除")])],1)])],2)],1)],1),e._v(" "),n("role-dialog",{ref:"roleDialog",on:{getRoleList:e.getRoleList}})],1)},o=[],i=n("4bde"),l=n("0769"),a=n("6724"),c=n("ed08"),s=n("2564"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.dialog.title,visible:e.dialog.visible,width:"40%","close-on-press-escape":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[n("el-row",{staticStyle:{"margin-bottom":"20px","margin-top":"-8px"}},[n("div",{staticClass:"div_title"},[n("span",[e._v("角色信息")])])]),e._v(" "),n("el-row",[n("el-col",{attrs:{span:21}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"名称:",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"描述:",prop:"desc"}},[n("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单:"}},[n("el-tree",{ref:"tree",staticClass:"permission-tree",attrs:{"check-strictly":e.checkStrictly,data:e.routesData,props:e.defaultProps,"show-checkbox":"","node-key":"path"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialog.visible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.updateRoleInfo}},[e._v("确 定")])],1)],1)},f=[],d=(n("4453"),n("089b")),h=(n("f301"),n("df99"),n("e20c")),p=(n("0eb5"),n("a4c5"),n("f763"),n("fb37"),n("4964")),g=(n("7364"),n("6266")),v=n.n(g),m=n("a18c"),b=n("c1f9"),y=n.n(b),w={name:"RoleDialog",data:function(){return{dialog:{title:null,visible:!1},role_id:null,form:{key:null,name:null,desc:null,routes:[]},formRules:{name:[{required:!0,message:"请输入角色",trigger:"blur"}]},routes:[],checkStrictly:!1,defaultProps:{children:"children",label:"title"}}},computed:{routesData:function(){return this.routes}},methods:{showRoleDialog:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.dialog.visible=!0,this.dialog.title=t?"修改角色【".concat(t.name,"】"):"创建角色",this.routes=this.generateRoutes(Object(c["a"])(Object(p["a"])(m["a"]))),this.$nextTick(function(){if(e.$refs.form.clearValidate(),!t)return e.role_id=null,void e.$refs.form.resetFields();e.form=y.a.pick(Object(c["a"])(t),Object.keys(e.form)),e.role_id=t.id;var n=e.generateRoutes(JSON.parse(e.form.routes||"[]"));e.$refs.tree.setCheckedNodes(e.generateArr(n)),e.checkStrictly=!1})},generateArr:function(e){var t=this,n=[];return e.forEach(function(e){if(n.push(e),e.children){var r=t.generateArr(e.children);r.length>0&&(n=[].concat(Object(p["a"])(n),Object(p["a"])(r)))}}),n},updateRoleInfo:function(){var e=this;this.$refs["form"].validate(function(t){if(!t)return!1;e.confirmRole()})},generateRoutes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=[],r=!0,o=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var c=l.value;if(!c.hidden){var s=this.onlyOneShowingChild(c.children,c);c.children&&s&&!c.alwaysShow&&(c=s);var u={path:v.a.resolve(t,c.path),title:c.meta&&c.meta.title};c.children&&(u.children=this.generateRoutes(c.children,u.path)),n.push(u)}}}catch(f){o=!0,i=f}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n},onlyOneShowingChild:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=null,r=e.filter(function(e){return!e.hidden});return 1===r.length?(n=r[0],n.path=v.a.resolve(t.path,n.path),n):0===r.length&&(n=Object(h["a"])({},t,{path:"",noShowingChildren:!0}),n)},generateTree:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=arguments.length>2?arguments[2]:void 0,r=[],o=!0,i=!1,l=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var s=a.value,u=v.a.resolve(t,s.path);s.children&&(s.children=this.generateTree(s.children,u,n)),(n.includes(u)||s.children&&s.children.length>=1)&&r.push(s)}}catch(f){i=!0,l=f}finally{try{o||null==c.return||c.return()}finally{if(i)throw l}}return r},getRoutesPath:function(e){if(!e||!e.length)return!1;var t=[],n=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var a=i.value;a.children&&a.children.forEach(function(e,n){t.push(e.path)}),a.path&&t.push(a.path),a.children&&this.getRoutesPath(a.children)}}catch(c){r=!0,o=c}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t},confirmRole:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$refs.tree.getCheckedKeys(),this.form.routes=this.generateTree(Object(c["a"])(this.routes),"/",t),n=this.getRoutesPath(this.form.routes),console.log(3,n),!this.role_id){e.next=12;break}return this.form.routes=JSON.stringify(this.form.routes),this.form.routes_map=JSON.stringify(n),e.next=9,Object(s["d"])(this.role_id,this.form);case 9:this.$message.success("更新成功"),e.next=18;break;case 12:return this.form.key=this.form.name,this.form.routes=JSON.stringify(this.form.routes),this.form.routes_map=JSON.stringify(n),e.next=17,Object(s["a"])(this.form);case 17:this.$message.success("创建成功");case 18:this.dialog.visible=!1,this.$emit("getRoleList");case 20:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},_=w,S=(n("fed5"),n("17cc")),x=Object(S["a"])(_,u,f,!1,null,"86f27c0a",null),R=x.exports,k={name:"index",directives:{waves:a["a"]},components:{PanelTitle:i["a"],TableFoot:l["a"],RoleDialog:R},data:function(){return{roleList:[],listLoading:!0,listQuery:{},selectedRoles:[]}},created:function(){this.getRoleList()},methods:{setSelection:function(e){this.selectedRoles=Object(c["c"])(e,"id")},selectionChange:function(e){this.$refs.tableFoot.selectionChange(e)},getRoleList:function(){var e=this;Object(s["c"])(this.listQuery).then(function(t){e.roleList=t._items,e.listLoading=!1})},createRoleInfo:function(){this.$refs.roleDialog.showRoleDialog()},deleteRole:function(e){var t=this,n=y.a.isArray(e)?e:[e.id];this.$confirm("此操作将删角色, 是否继续?","提示",{type:"warning"}).then(function(){t.listLoading=!0,Object(s["b"])({id:n}).then(function(){t.getRoleList(),t.listLoading=!1,t.$message.success("删除成功")})}).catch(function(){return t.listLoading=!1})},editRole:function(e){this.$refs.roleDialog.showRoleDialog(e)}}},O=k,N=Object(S["a"])(O,r,o,!1,null,"75ce3b63",null);t["default"]=N.exports},c9ea:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},d4d5:function(e,t,n){"use strict";var r=n("3754"),o=n("03b3"),i=n("94ac"),l=n("44de"),a=n("5325"),c=n("b6f1"),s=n("a891").f,u=n("acb9").f,f=n("ddf7").f,d=n("539d").trim,h="Number",p=r[h],g=p,v=p.prototype,m=i(n("a7b8")(v))==h,b="trim"in String.prototype,y=function(e){var t=a(e,!1);if("string"==typeof t&&t.length>2){t=b?t.trim():d(t,3);var n,r,o,i=t.charCodeAt(0);if(43===i||45===i){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+t}for(var l,c=t.slice(2),s=0,u=c.length;s<u;s++)if(l=c.charCodeAt(s),l<48||l>o)return NaN;return parseInt(c,r)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(m?c(function(){v.valueOf.call(n)}):i(n)!=h)?l(new g(y(t)),n,p):y(t)};for(var w,_=n("dad2")?s(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;_.length>S;S++)o(g,w=_[S])&&!o(p,w)&&f(p,w,u(g,w));p.prototype=v,v.constructor=p,n("e5ef")(r,h,p)}},ed08:function(e,t,n){"use strict";n("fb37");function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e){return o="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},o(e)}n("d876"),n("21de"),n("7c56"),n("34a3"),n("0eb5"),n("a4c5"),n("f763"),n("e20c"),n("c1f9");function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=[];if(e&&e.length){var r=!0,o=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var c=l.value;n.push(c[t])}}catch(s){o=!0,i=s}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}}return n}n.d(t,"c",function(){return i}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return a}),n.d(t,"d",function(){return c});function l(e){var t=[];if(!t.length)return"";for(var n={},r=0,o=t;r<o.length;r++){var i=o[r];n[i.value]=i.label}return n[e]||""}function a(e){if(!e&&"object"!==o(e))throw new Error("error arguments","deepClone");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach(function(n){e[n]&&"object"===o(e[n])?t[n]=a(e[n]):t[n]=e[n]}),t}var c={disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}},fed5:function(e,t,n){"use strict";var r=n("26de"),o=n.n(r);o.a}}]);